<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
       <record id="inherited_mrp_eco_view_form" model="ir.ui.view">
            <field name="name">inherited.mrp.eco.view.form</field>
            <field name="model">mrp.eco</field>
            <field name="inherit_id" ref="mrp_plm.mrp_eco_view_form" />
            <field name="arch" type="xml">
                <xpath expr="//form/header/button[@name='action_apply']" position="replace">
                    <button string="Submit" name="action_apply" type="object" class="oe_highlight" attrs="{'invisible': [('allow_apply_change', '=', False)]}"/>
                </xpath>

                <xpath expr="//field[@name='product_tmpl_id']" position="replace">
                    <!-- <field name="product_tmpl_id" domain="[('type', 'in', ['consu', 'product'])]" attrs="{'readonly': [('state', '!=', 'confirmed')], 'invisible': [('type', 'in', ('routing', 'product'))], 'required': [('type', 'in', ('bom', 'both', 'product'))]}"/> -->
                    <field name="product_tmpl_id" domain="[('type', 'in', ['consu', 'product'])]" attrs="{'readonly': [('state', '!=', 'confirmed')], 'invisible': [('type', 'in', ('routing', 'product'))], 'required': [('type', 'in', ('bom', 'both'))]}"/>
                </xpath>
                <xpath expr="//form/sheet/notebook" position="inside">                  

                    <page string="Affected Parts" attrs="{'invisible': [('type', '!=', 'product')]}">
		                    <field name="affected_part_line" >
		                        <tree editable="bottom">
                                    <!-- <field name ="affected_product_id" string="Product" options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' widget="many2one_barcode"/> -->
                                    <field name ="affected_product_id" string="Product" options='{"no_open": False,"no_create": 1, "no_create_edit": 1}'/>
		                            <field name ="copy_production_state" string="Copy Production State" invisible="1"/>
                                    <field name ="production_state" string="Production State" options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' domain="[('name', '!=', copy_production_state)]"/>
                                    <field name ="generate_revision" string="Generate Revision" widget="toggle"/>
                                    <field name ="generate_revision_depend" string="Generate Revision depend" widget="toggle" invisible="1"/>
                                    <field name ="next_revision" string="Next Revision"/>
                                    <field name="notes"/>
                                    
		                            <field name="mrp_eco_id" invisible="1"/>
                                    <!-- <field name="document_wizard_line" invisible="1"/> -->
                                    <button name="upload_doc" id="upload_doc_1" string="Upload Document" type="object" options='{"warn": true}' attrs="{'invisible': [('generate_revision', '!=', True)]}" class="oe_edit_only oe_highlight" custom='click'/>
                                    <!-- <button name="upload_doc" string="Upload Document" type="object" class="oe_highlight"/>	 -->
                                
                                </tree>	

                                <form>
                                    <sheet>
                                        <group col="2">
                                            <field name ="affected_product_id" string="Product" options='{"no_open": False,"no_create": 1, "no_create_edit": 1}' widget="many2one_barcode"/>
                                            <field name ="production_state" string="Production State" options='{"no_open": True,"no_create": 1, "no_create_edit": 1}'/>
                                            <field name ="generate_revision" string="Generate Revision" />
                                            <field name ="next_revision" string="Next Revision"/>
                                            <field name="notes"/>                                            
                                            <field name="mrp_eco_id" invisible="1"/> 
                                            <field name="document_wizard_line" readonly="1">
                                                <tree>
                                                    <!-- <field name="item_number"/>                                     -->
                                                    <field name="upload_document_name"/>   
                                                    <field name="upload_document" filename="upload_document_name"/>
                                                    <field name="mrp_eco_product_id" invisible="1"/>
                                                    <field name="full_url" widget="url" readonly="1" attrs="{'invisible': [('upload_document', '=', False)]}"/>
                                                </tree>
                                            </field>
                                            
                                        </group>
                                    </sheet>
                                </form>


		                    </field>
                    </page>

                </xpath>
            </field>
        </record>  

        
          

        

    </data>
</odoo>